<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>微信汽车</title>
		<!--自适应框架 go-->
		<style type="text/css">
			div {
				font-size: 12px;
				/*    默认写上dpr为1的fontSize*/
			}
			
			[data-dpr="2"] div {
				font-size: 24px;
			}
			
			[data-dpr="3"] div {
				font-size: 36px;
			}
		</style>
		<script src="build/flexible_css.debug.js"></script>
		<script src="build/flexible.debug.js"></script>
		<script type="text/javascript">
			if(!dpr && !scale) {
				var isAndroid = win.navigator.appVersion.match(/android/gi);
				var isIPhone = win.navigator.appVersion.match(/iphone/gi);
				var devicePixelRatio = win.devicePixelRatio;
				if(isIPhone) {
					// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案
					if(devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {
						dpr = 3;
					} else if(devicePixelRatio >= 2 && (!dpr || dpr >= 2)) {
						dpr = 2;
					} else {
						dpr = 1;
					}
				} else {
					// 其他设备下，仍旧使用1倍的方案
					dpr = 1;
				}
				scale = 1 / dpr;
			}
		</script>
		<!--自适应框架 end-->
		<!--heaedr-->

		<!--guide-->
		<!--guide-->

		<link rel="stylesheet" type="text/css" href="font/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/pub.css" />
		<link rel="stylesheet" type="text/css" href="css/wopu.css" />
		<style type="text/css">

		</style>
	</head>

	<body>
		<div class="guding">
			<div class="head ">
				<div class="box">
					<div class="i">
						<a href="dingdan.html"><i class="iconfont icon-gengduo-copy"></i></a>
					</div>
					<div class="hd">
						<span>座位选择</span>
					</div>
				</div>
			</div>
		</div>
		<div class="kong">

		</div>
		<div class="quan">

			<div class="banxin">
				<span></span>
			</div>
			<div class="xuan">
				<div class="left">
					<div class="tu">

					</div>
					<div class="text">
						<p>已选</p>
					</div>

				</div>
				<div class="center">
					<div class="tu">

					</div>
					<div class="text">
						<p>可选</p>
					</div>

				</div>
				<div class="right">
					<div class="tu">

					</div>
					<div class="text">
						<p>已售</p>
					</div>
				</div>
			</div>
			<div class="wzi">
				<div class="top">
					<span>头部</span>
				</div>
				<div class="wleft">
					<div class="wleft1">
						<ul>
							<li>1上</li>
							<li>4上</li>
							<li>7上</li>
							<li>10上</li>
							<li>13上</li>
							<li>16上</li>
							<li>19上</li>
						</ul>
					</div>
					<div class="wleft2">
						<ul>
							<li>1下</li>
							<li>4下</li>
							<li>7下</li>
							<li>10下</li>
							<li>13下</li>
							<li>16下</li>
							<li>19下</li>
						</ul>
					</div>

				</div>
				<div class="guo">
					<p>过</p>
					<p>道</p>
				</div>
				<div class="zhong">
					<div class="wleft1">
						<ul>
							<li>2上</li>
							<li>5上</li>
							<li>8上</li>
							<li>11上</li>
							<li>14上</li>
							<li>17上</li>

						</ul>
					</div>
					<div class="wleft2">
						<ul>
							<li>2下</li>
							<li>5下</li>
							<li>8下</li>
							<li>11下</li>
							<li>14下</li>
							<li>17下</li>

						</ul>
					</div>
					<div class="dguo">
						<span>过道</span>
					</div>
				</div>
				<div class="guo">
					<p>过</p>
					<p>道</p>
				</div>
				<div class="wleft">
					<div class="wleft1">
						<ul>
							<li>3上</li>
							<li>6上</li>
							<li>9上</li>
							<li>12上</li>
							<li>15上</li>
							<li>18上</li>

						</ul>
					</div>
					<div class="wleft2">
						<ul>
							<li>3下</li>
							<li>6下</li>
							<li>9下</li>
							<li>12下</li>
							<li>15下</li>
							<li>18下</li>

						</ul>
					</div>
					<div class="dguo">
						<span>洗手间</span>
					</div>
				</div>

				<div class="bon">
					<span>尾部</span>
				</div>
			</div>
		</div>
		<div class="srue">
			<span>确认选座</span>
		</div>
		<div class="tan">
			<span>请填选择座位</span>
		</div>
		<div class="zhe"></div>
		<script src="js/jquery-1.12.3.js" type="text/javascript" charset="utf-8"></script>

		<script type="text/javascript">
			var userid = [];
			if(localStorage.getItem('userid')) {
				userid = JSON.parse(localStorage.getItem('userid'));
			}
			if(userid ==''){
				$('body').html('')
			}
			$("ul li").on('click', function() {
				if($(this).hasClass('corro') || $(this).hasClass('corr1')) {
					$(this).removeClass('corro');

				} else {
					$(this).addClass('corro');

				}
			})
			$("ul li").on('click', function() {
				if($(".corro").length > 5){
					$(this).removeClass('corro');
					$('.tan').show();
					$('.zhe').show();
					$('.tan').html('最多可选5个座位')
				}
			})
			var zuow = []
			$(".srue").on('click', function() {
				if($('.corro').length == 0) {
					$('.tan').show();
					$('.zhe').show();

				} else {
					$('.tan').hide();
					$('.zhe').hide();
					var corro = $('.corro');
					for(var i = 0; i < $('.corro').length; i++) {
						zuow.push($(corro[i]).html());
					}
					window.location.href="dingdan.html"
					
					localStorage.setItem('zuow', JSON.stringify(zuow));

				}
			});
			$('.tan').on('click', function() {
				$('.tan').hide();
				$('.zhe').hide();
			});
			$('.zhe').on('click', function() {
				$('.tan').hide();
				$('.zhe').hide();
				
			});
			var shuzi = [];
			if(localStorage.getItem('shuzi')) {
				shuzi = JSON.parse(localStorage.getItem('shuzi'));
			}
			var o = parseInt(shuzi);
			var data = [];
			if(localStorage.getItem('data')) {
				data = JSON.parse(localStorage.getItem('data'));

			}
			var ttm = [];
			if(localStorage.getItem('ttm')) {
				ttm = JSON.parse(localStorage.getItem('ttm'));
			}
		
			var time = data[o].gotime;
			time = time.substring(0, 5);
			var o = parseInt(shuzi);
			var pop = [];
			var cout = $('ul li');
			for(var m = 0; m < $('ul li').length; m++) {
				pop.push($(cout[m]).html());
			}

			
			$('.banxin span').html(data[o].licenseNumber + '（' + '卧' + '）')
			$.ajax({
				type: "post",
				url: "http://192.168.1.110:8090/appuser/getOrder.do",
				data: { "ORDERDATE": ttm, "SID": data[o].shift_id },
				dataType: "json",
				success: function(data) {
					
					
				if(data[0][1]!=null && data[0][1]!=''){
					var data1 = data[0][1].split(',')
					for(var i = 0; i < data1.length; i++) {
						for(var j = 0; j < pop.length; j++) {
							if(data1[i] == pop[j]) {
								$('ul li').eq(j).addClass('corr1');
							}
						}

					}
				}
				if(data[0][2]!=null && data[0][2]!=''){
					var data2 = data[0][2].split(',')
					for(var i = 0; i < data2.length; i++) {
						for(var j = 0; j < pop.length; j++) {
							if(data2[i] == pop[j]) {
								$('ul li').eq(j).addClass('corr1');
							}
						}

					}
				}
				if(data[0][3]!=null && data[0][3]!=''){
					var data3 = data[0][3].split(',')
					for(var i = 0; i < data3.length; i++) {
						for(var j = 0; j < pop.length; j++) {
							if(data3[i] == pop[j]) {
								$('ul li').eq(j).addClass('corr1');
							}
						}

					}
				}
				}
			});
		</script>
	</body>

</html>